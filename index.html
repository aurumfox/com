<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AlphaFox DAO | Solana Staking & NFT</title>
    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
    <script src="https://unpkg.com/@project-serum/anchor@0.26.0/dist/browser/anchor.min.js"></script>
    <script src="https://bundle.run/@solana/wallet-adapter-phantom@0.9.24"></script>
    
    <style>
        :root {
            --primary: #fb923c;
            --bg: #0f172a;
            --card: #1e293b;
            --text: #f8fafc;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            line-height: 1.6;
        }

        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }

        /* Loader */
        #page-loader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(15, 23, 42, 0.8); display: none;
            justify-content: center; align-items: center; z-index: 9999;
        }

        /* Notifications */
        #notification-container {
            position: fixed; top: 20px; right: 20px; z-index: 10000;
        }
        .notification {
            background: var(--card); border-left: 4px solid var(--primary);
            padding: 15px 25px; margin-bottom: 10px; border-radius: 4px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3); animation: slideIn 0.3s ease;
        }

        /* Header & Nav */
        header { display: flex; justify-content: space-between; align-items: center; padding: 20px 0; }
        .connect-wallet-btn { background: var(--primary); border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; color: white; font-weight: bold; }
        .wallet-display { display: none; align-items: center; gap: 10px; cursor: pointer; }

        /* Grid Sections */
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 40px; }
        .card { background: var(--card); padding: 25px; border-radius: 12px; }

        /* Form Elements */
        input, select { width: 100%; padding: 10px; margin: 10px 0; border-radius: 6px; border: 1px solid #334155; background: #0f172a; color: white; }
        .btn { width: 100%; padding: 12px; border-radius: 8px; border: none; cursor: pointer; font-weight: 600; transition: 0.3s; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-secondary { background: #334155; color: white; }

        /* NFT Cards */
        .nft-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px; }
        .nft-card { background: #334155; padding: 10px; border-radius: 8px; text-align: center; }
        .nft-card img { width: 100%; border-radius: 6px; }

        /* Modals */
        .modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); display: none; justify-content: center; align-items: center; z-index: 1000;
        }
        .modal-content { background: var(--card); padding: 30px; border-radius: 15px; max-width: 500px; width: 90%; position: relative; }
        .close-modal { position: absolute; top: 15px; right: 15px; cursor: pointer; font-size: 24px; }

        @keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }
    </style>
</head>
<body>

    <div id="page-loader"><span>Loading AlphaFox...</span></div>
    <div id="notification-container"></div>

    <div class="container">
        <header>
            <div class="logo"><h1>AlphaFox DAO</h1></div>
            <nav id="mainNav">
                <button class="connect-wallet-btn">Connect Wallet</button>
                <div class="wallet-display" data-wallet-control="walletDisplay">
                    <span class="wallet-address-display">0x00...0000</span>
                    <button class="btn-secondary" style="width: auto;">Disconnect</button>
                </div>
            </nav>
            <div id="menuToggle"><span></span><span></span><span></span></div>
        </header>

        <section class="grid">
            <div class="card">
                <h2>Staking AFOX</h2>
                <div class="info-row">Balance: <span id="user-afox-balance">0 AFOX</span></div>
                <div class="info-row">Staked: <span id="user-staked-amount">0 AFOX</span></div>
                <div class="info-row">Rewards: <span id="user-rewards-amount">0 AFOX</span></div>
                <hr>
                <select id="pool-selector"></select>
                <input type="number" id="stake-amount" placeholder="Amount to stake">
                <button id="stake-afox-btn" class="btn btn-primary">Stake Tokens</button>
                <div style="margin-top: 10px; display: flex; gap: 10px;">
                    <button id="claim-rewards-btn" class="btn btn-secondary">Claim</button>
                    <button id="unstake-afox-btn" class="btn btn-secondary">Unstake</button>
                </div>
                <p><small id="lockup-period">—</small></p>
                <p><small id="staking-apr">—</small></p>
            </div>

            <div class="card">
                <h2>Jupiter Swap</h2>
                <div style="position: relative;">
                    <label>From: <span id="swap-from-balance" style="float:right">0</span></label>
                    <div style="display:flex; gap:5px;">
                        <input type="number" id="swap-from-amount" placeholder="0.0">
                        <select id="swap-from-token" style="width: 100px;">
                            <option value="SOL">SOL</option>
                            <option value="AFOX">AFOX</option>
                        </select>
                    </div>
                    <button class="max-amount-btn" data-input-id="swap-from-amount" style="font-size: 10px; cursor: pointer;">MAX</button>
                </div>
                
                <div style="text-align: center; margin: 10px 0;">
                    <button id="swap-direction-btn" style="background: none; border: 1px solid #334155; color: white; border-radius: 50%; width: 30px; height: 30px; cursor: pointer;">↓</button>
                </div>

                <label>To (Estimated):</label>
                <div style="display:flex; gap:5px;">
                    <input type="number" id="swap-to-amount" placeholder="0.0" readonly>
                    <select id="swap-to-token" style="width: 100px;">
                        <option value="AFOX">AFOX</option>
                        <option value="SOL">SOL</option>
                    </select>
                </div>
                
                <div style="font-size: 12px; margin: 10px 0;">
                    Price Impact: <span id="price-impact">0%</span><br>
                    Fee: <span id="lp-fee">0</span><br>
                    Min. Received: <span id="min-received">0</span>
                </div>
                
                <button id="get-quote-btn" class="btn btn-secondary">Get Quote</button>
                <button id="execute-swap-btn" class="btn btn-primary" style="display:none; margin-top: 5px;">Swap Now</button>
            </div>
        </section>

        <section class="card" style="margin-top: 20px;">
            <div style="display:flex; justify-content: space-between; align-items: center;">
                <h2>My NFTs</h2>
                <button class="btn btn-primary" style="width: auto;" onclick="document.getElementById('mint-nft-modal').style.display='flex'">Mint NFT</button>
            </div>
            <div id="user-nft-list" class="nft-grid">
                </div>
        </section>

        <section class="card" style="margin-top: 20px;">
            <h2>Marketplace</h2>
            <div id="marketplace-nft-list" class="nft-grid"></div>
        </section>
    </div>

    <div id="nft-details-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <img id="nft-detail-image" src="" style="width:100%; border-radius:10px;">
            <h2 id="nft-detail-name">NFT Name</h2>
            <p id="nft-detail-description"></p>
            <hr>
            <div style="font-size: 12px;">
                Owner: <span id="nft-detail-owner"></span><br>
                Mint: <span id="nft-detail-mint"></span>
            </div>
            <h3>Attributes</h3>
            <ul id="attributes-list"></ul>
            <button id="nft-detail-buy-btn" class="btn btn-primary">Buy NFT</button>
            <button id="nft-detail-sell-btn" class="btn btn-secondary">List for Sale</button>
            <button id="nft-detail-transfer-btn" class="btn btn-secondary" style="margin-top:5px;">Transfer</button>
            <h3>History</h3>
            <ul id="nft-detail-history" style="font-size: 11px; max-height: 100px; overflow-y: auto;"></ul>
        </div>
    </div>

    <div id="mint-nft-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Mint AlphaFox NFT</h2>
            <form id="mint-nft-form">
                <input type="text" name="mint-name" placeholder="NFT Name" required>
                <textarea name="mint-description" placeholder="Description" style="width:100%; height:80px; background:#0f172a; color:white; border-radius:6px; padding:10px;" required></textarea>
                <input type="url" name="mint-image" placeholder="Image URL (optional)">
                <button type="submit" class="btn btn-primary">Mint (0.05 SOL Fee)</button>
            </form>
        </div>
    </div>

    <div id="sell-nft-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>List NFT for Sale</h2>
            <form id="list-nft-form">
                <select id="nft-to-sell" name="nft-to-sell"></select>
                <input type="number" step="0.01" name="list-price" placeholder="Price in SOL" required>
                <button type="submit" class="btn btn-primary">Confirm Listing</button>
            </form>
        </div>
    </div>

    <div class="nav-mobile-overlay"></div>

    <script src="script.js"></script>
</body>
</html>
