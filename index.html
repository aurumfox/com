<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aurum Fox Portal: Web3 & Multimedia Ecosystem on Solana (Secured)</title>
    <meta name="description" content="Official portal of the Aurum Fox meme coin. Explore Web3 features (Games, NFTs, DAO, Staking, Swaps) and a multimedia hub (Photos, Posts, Mini-Games). Your gateway to the AFOX ecosystem on Solana.">
    <meta name="keywords" content="Aurum Fox, AFOX, Solana, meme coin, Web3, NFT, DAO, Staking, Crypto Games, Decentralized Advertising, DeFi, Blockchain, SPL Token, Raydium, Orca, Phantom Wallet">
    <meta name="author" content="Aurum Fox Community">
    
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://aurumfox.github.io/com/"> 
    <meta property="og:title" content="Aurum Fox Portal: Web3 & Multimedia Ecosystem on Solana">
    <meta property="og:description" content="Official portal of the Aurum Fox meme coin. Explore Web3 features (Games, NFTs, DAO, Staking, Swaps) and a multimedia hub. Your gateway to the AFOX ecosystem on Solana.">
    <meta property="og:image" content="./assets/foxcoin-hero.png.jpg"> 
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://aurumfox.github.io/com/"> 
    <meta property="twitter:title" content="Aurum Fox Portal: Web3 & Multimedia Ecosystem on Solana">
    <meta property="twitter:description" content="Official portal of the Aurum Fox meme coin. Explore Web3 features (Games, NFTs, DAO, Staking, Swaps) and a multimedia hub. Your gateway to the AFOX ecosystem on Solana.">
    <meta property="twitter:image" content="./assets/foxcoin-hero.png.jpg"> 
    
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self' https://terminal.jup.ag https://api.mainnet-beta.solana.com;
        /* ДОБАВЛЕНЫ unpkg.com и cdn.jsdelivr.net для Web3 библиотек */
        script-src 'self' https://js-de.sentry-cdn.com https://www.gstatic.com https://cdn.jup.ag https://terminal.jup.ag https://unpkg.com https://cdn.jsdelivr.net; 
        /* ДОБАВЛЕНЫ unpkg.com и cdn.jsdelivr.net для Web3 библиотек */
        connect-src 'self' https://o4505059231873024.ingest.sentry.io https://firestore.googleapis.com https://auth.firebase.com https://api.jupiter.ag https://api.mainnet-beta.solana.com wss://api.mainnet-beta.solana.com https://unpkg.com https://cdn.jsdelivr.net; 
        style-src 'self' https://fonts.googleapis.com; 
        font-src 'self' https://fonts.gstatic.com; 
        img-src 'self' https://via.placeholder.com data: https:; 
        object-src 'none'; 
        base-uri 'self';
        form-action 'self';
        frame-src https://terminal.jup.ag https://birdeye.so;
        frame-ancestors 'self';
        upgrade-insecure-requests;
    ">
    
    <script src="https://unpkg.com/@solana/web3.js@1.91.7/lib/index.iife.js" onload="window.solanaWeb3 = solanaWeb3;" onerror="console.error('Failed to load solanaWeb3.js');"></script>
    <script src="https://unpkg.com/@coral-xyz/anchor@0.29.0/dist/browser/index.js" onload="window.anchor = anchor;" onerror="console.error('Failed to load anchor.js');"></script>
    <script src="https://unpkg.com/@solana/wallet-adapter-base@0.9.20/lib/index.iife.js" onload="window.SolanaWalletAdapterBase = SolanaWalletAdapterBase;"></script>
    <script src="https://unpkg.com/@solana/wallet-adapter-phantom@0.9.19/lib/index.iife.js" onload="window.solanaWalletAdapterPhantom = SolanaWalletAdapterPhantom;"></script>
    <script src="https://unpkg.com/@solana/spl-token@0.4.7/lib/index.iife.js" onload="window.splToken = splToken;"></script>
    <script src="https://unpkg.com/bn.js@5.2.1/lib/bn.js" onload="window.BN = BN;"></script>
    <script src="https://cdn.jsdelivr.net/npm/buffer@6.0.3/index.js"></script>
    
    <script src="https://js-de.sentry-cdn.com/93b9760a7026c9acedf1f14b044146c6.min.js" crossorigin="anonymous"></script>
    <script>
        Sentry.init({
            dsn: "https://SENTRY_DSN_PLACEHOLDER@o4505059231873024.ingest.sentry.io/4505059233642496", 
            integrations: [ new Sentry.BrowserTracing() ],
            tracesSampleRate: 1.0, 
            release: "aurum-fox-portal@1.0.0", 
            environment: "production",
        });
        Sentry.setTag("context", "Web3 Solana Interface");
    </script>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
    
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="./assets/favicon.png.jpg" type="image/png.jpg">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Poppins:wght%40300;400;600&display=swap" rel="stylesheet">
    
    <style>
        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            margin: -1px;
            padding: 0;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            border: 0;
        }

        .wallet-connect-btn {
            display: inline-block;
            padding: 10px 20px;
            border: 2px solid #FF8C00; 
            background-color: #000;
            color: #FF8C00;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s, color 0.3s;
            font-weight: bold;
            font-family: 'Montserrat', sans-serif;
            margin-left: 15px;
        }
        .wallet-connect-btn:hover {
            background-color: #FF8C00;
            color: #000;
        }
        .wallet-connect-btn.connected {
            /* Цвет для Connected: Зеленый */
            background-color: #4CAF50;
            color: white;
            border: 2px solid #4CAF50;
            cursor: pointer; /* Сделано clickable для Disconnect */
        }
        .wallet-connect-btn.connected:hover {
             /* Цвет для Disconnect: Красный */
            background-color: #e74c3c;
            border: 2px solid #e74c3c;
        }
        .error { color: red; }
        .primary-btn {
            display: inline-block;
            padding: 12px 24px;
            background-color: #f39c12; 
            color: #ffffff;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 700;
            text-decoration: none;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 15px;
        }
        
        .primary-btn:hover {
            background-color: #e67e22; 
        }
        .web3-wallet-display {
            font-size: 0.9em;
            color: #ccc;
            margin-top: 10px;
            word-break: break-all;
        }
        .web3-wallet-display strong {
            color: #fff;
        }
        
        @media (max-width: 600px) {
            .ai-diagnostic-tool__controls {
                flex-direction: column;
            }
            .wallet-connect-btn {
                width: 100%;
                margin-top: 10px;
            }
        }
        /* Стили для уведомлений */
        .notification-success { background-color: #2ecc71; }
        .notification-error { background-color: #e74c3c; }
        .notification-info { background-color: #3498db; }
        .notification-warning { background-color: #f39c12; }
    </style>
</head>
<body>
   <header class="header">
    <div class="container">
        
        <div class="logo">
            <img src="./assets/foxcoin-hero.png.jpg" alt="Aurum Fox Logo" class="logo-img">
            <span class="logo-text">Aurum Fox Portal</span>
        </div>
        
        <div class="header-controls-group">
            
            <div id="menuToggle" class="menu-toggle" aria-controls="mainNav" aria-expanded="false" role="button" tabindex="0" aria-label="Toggle navigation menu">
                <div class="hamburger"></div>
            </div>
            
            <button id="connectWalletBtn" class="wallet-connect-btn">
                Connect Wallet
            </button>
        </div>
        
        <nav class="nav-mobile-overlay"> 
            <ul id="mainNav" class="main-nav" role="navigation" aria-hidden="true">
                
                <span class="close-menu-button" id="closeMainMenuCross" role="button" tabindex="0" aria-label="Close menu">&times;</span>
                
                <li><a href="#aurum-fox-home">Aurum Fox</a></li>
                <li><a href="#about-afox">About AFOX</a></li>
                <li><a href="#tokenomics">Tokenomics</a></li>
                <li><a href="#how-to-buy">Acquire AFOX</a></li>
                <li><a href="#aurum-nfts">Aurum NFTs</a></li>
                <li><a href="#aurum-nfc">Aurum NFC</a></li>
                <li><a href="#aurum-roadmap">Roadmap</a></li>
                <li><a href="#aurum-news">News</a></li>
                <li><a href="#aurum-community">Community</a></li>
                
                <li class="nav-separator">--- Web3 Portal ---</li> 
                <li><a href="#web3-site-home">Web3 Overview</a></li>
                <li><a href="#games-section">Games</a></li>
                <li><a href="#nft-section">NFT Portal</a></li>
                <li><a href="#dao-section">DAO</a></li>
                <li><a href="#staking-section">Staking</a></li>
                <li><a href="#lending-section">Lending</a></li> 
                <li><a href="#swap-section">Swap</a></li>
                
                </ul>
        </nav>
        
    </div>
</header>

    <main>
        <section id="aurum-fox-home" class="hero-section aurum-fox-section">
            <div class="container">
                <div class="hero-content">
                    <h1>Aurum Fox: Your Golden Luck on Solana!</h1>
                    <p class="tagline intro-text">Combining the cunning of the fox, the prosperity of gold, and the speed of Solana.</p>
                    <div class="hero-buttons call-to-action">
                        <a href="#how-to-buy" class="btn btn-primary primary-btn">Get AFOX</a>
                        <a href="#aurum-community" class="btn btn-secondary secondary-btn">Join the Community</a>
                    </div>
                </div>
                <div class="hero-image">
                    <img src="./assets/foxcoin-hero.png.jpg" alt="Aurum Fox golden coin with fox image and 'Aurum Fox' text">
                </div>
            </div>
        </section>

        <section id="about-afox" class="section aurum-fox-section-alt">
            <div class="container">
                <h2 class="aurum-heading">About Our AURUM FOX (AFOX) Meme Token</h2>
                <p>Welcome to the world of <strong>AURUM FOX!</strong> We are a new, fully decentralized meme token, created by the community and for the community. Our goal is to create a fun, dynamic, and truly community-driven meme token on the Solana blockchain.</p>
                <p><strong>AURUM FOX</strong> is a meme token presented as a golden coin with a cute cartoon fox image and the inscription "AURUM FOX". Its name combines the Latin "Aurum" (gold), symbolizing value, and "Fox" – a popular image for creating viral brands in the meme token space.</p>
                <p>We believe in transparency and fairness. All permissions for <strong>minting</strong> (creating new tokens) and <strong>freezing</strong> (locking existing tokens) have been **irreversibly revoked**. This ensures a fixed total supply and the inability to lock your assets. No one, not even the creators, can issue new tokens or interfere with your holdings. AURUM FOX (AFOX) is a 100% community-governed meme token.</p>
            </div>
        </section>

        <section id="tokenomics" class="section aurum-fox-section">
            <div class="container">
                <h2 class="aurum-heading">Aurum Fox Tokenomics</h2>
                <div class="tokenomics-grid tokenomics-details">
                    <div class="tokenomics-item">
                        <h3>Total Supply</h3>
                        <p class="highlight">10,000,000 AFOX</p>
                        <p>A limited and fixed supply ensures the scarcity of Aurum Fox (AFOX).</p>
                        <p class="highlight-text-small"><strong>Minting rights revoked</strong></p>
                        <p class="highlight-text-small"><strong>Freezing rights revoked</strong></p>
                        <p>This demonstrates our commitment to decentralization and security for all holders.</p>
                    </div>
                    <div class="tokenomics-item">
                        <h3>Vesting Schedule</h3>
                        <p>To ensure long-term stability and prevent market manipulation, a portion of the supply will be released according to the following vesting schedule:</p>
                        <div class="table-responsive">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Vesting Period</th>
                                        <th>Release Percentage</th>
                                        <th>AFOX Unlocked</th>
                                        <th>Start Date</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Period 1</td>
                                        <td>20%</td>
                                        <td>1,800,000 AFOX</td>
                                        <td>June 23, 2027, 12:00 PM</td>
                                    </tr>
                                    <tr>
                                        <td>Period 2</td>
                                        <td>20%</td>
                                        <td>1,800,000 AFOX</td>
                                        <td>June 24, 2029, 12:00 PM</td>
                                    </tr>
                                    <tr>
                                        <td>Period 3</td>
                                        <td>20%</td>
                                        <td>1,800,000 AFOX</td>
                                        <td>June 25, 2031, 12:00 PM</td>
                                    </tr>
                                    <tr>
                                        <td>Period 4</td>
                                        <td>20%</td>
                                        <td>1,800,000 AFOX</td>
                                        <td>June 26, 2033, 12:00 PM</td>
                                    </tr>
                                    <tr>
                                        <td>Period 5</td>
                                        <td>20%</td>
                                        <td>1,800,000 AFOX</td>
                                        <td>June 27, 2035, 12:00 PM</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <div class="contract-address">
                    <p><strong>AFOX Contract Address:</strong> <span id="contractAddress" class="highlight-text">GLkewtq8s2Yr24o5LT5mzzEeccKuSsy8H5RCHaE9uRAd</span> </p>
                </div>
                <p class="tokenomics-note">Our tokenomics are designed for long-term sustainability and community growth.</p>
            </div>
        </section>

        <section id="how-to-buy" class="section aurum-fox-section-alt">
            <div class="container">
                <h2 class="aurum-heading">How to Acquire Aurum Fox (AFOX)</h2>
                <p>There are several ways to become part of our community and get AURUM FOX (AFOX):</p>
                <ol class="buy-steps how-to-list">
                    <li>
                        <h3>Step 1: Participate in Airdrops</h3>
                        <p>Follow our official channels to stay informed about upcoming airdrop announcements. Participate in community events for a chance to get free tokens!</p>
                    </li>
                    <li>
                        <h3>Step 2: Get a Solana Wallet</h3>
                        <p>You'll need a wallet that supports the Solana network, such as <a href="https://phantom.app/" target="_blank" rel="noopener noreferrer">Phantom</a>, <a href="https://solflare.com/" target="_blank" rel="noopener noreferrer">Solflare</a>. Install it as a browser extension or mobile application.</p>
                    </li>
                    <li>
                        <h3>Step 3: Fund Your Wallet with SOL</h3>
                        <p>Buy SOL (Solana) on any major centralized exchange (Binance, Coinbase, Bybit, etc.) and send it to the address of your chosen Solana wallet.</p>
                    </li> 
                    <li>
                        <h3>Step 4: Go to a DEX and Swap SOL for AFOX</h3>
                        <p>Use a Solana Decentralized Exchange (DEX) such as <a href="https://raydium.io/swap/" target="_blank" rel="noopener noreferrer">Raydium</a> or <a href="https://www.orca.so/swap" target="_blank" rel="noopener noreferrer">Orca</a> to swap SOL for AFOX.</p>
                        <p>On the swap page, paste the AFOX contract address (<span class="highlight-text">GLkewtq8s2Yr24o5LT5mzzEeccKuSsy8H5RCHaE9uRAd</span>) into the field for the token you want to receive. Confirm the transaction in your wallet.</p>
                        <p>Or use aggregators for more accurate coin information:</p>
                        <ul>
                            <li><a href="https://www.geckoterminal.com/solana/pools/FxkhmwaB144YDemgrfX4K5W2Jotz8YXaFpkMD4Pa9JKz" target="_blank" rel="noopener noreferrer">GeckoTerminal</a></li>
                            <li><a href="https://www.dextools.io/app/solana/pair-explorer/FxkhmwaB144YDemgrfX4K5W2Jotz8YXaFpkMD4Pa9JKz" target="_blank" rel="noopener noreferrer">DEXTools</a></li>
                            <li><a href="https://birdeye.so/solana/token/GLkewtq8s2Yr24o5LT5mzzEeccKuSsy8H5RCHaE9uRAd" target="_blank" rel="noopener noreferrer">Birdeye</a></li>
                            <li><a href="https://gmgn.ai/sol/token/solscan_GLkewtq8s2Yr24o5LT5mzzEeccKuSsy8H5RCHaE9uRAd?filter=All" target="_blank" rel="noopener noreferrer">GMGN.AI</a></li>
                             <li><a href="https://dexscreener.com/solana/GLkewtq8s2Yr24o5LT5mzzEeccKuSsy8H5RCHaE9uRAd" target="_blank" rel="noopener noreferrer">Dexscreener</a></li>
                            <li><a href="https://photon-sol.tinyastro.io/en/lp/FxkhmwaB144YDemgrfX4K5W2Jotz8YXaFpkMD4Pa9JKz" target="_blank" rel="noopener noreferrer">Photon Solana LP</a></li>
                        </ul>
                    </li>
                </ol>
                <p class="tip">Make sure you have enough SOL to cover network fees.</p>
                <p class="tip"><i>Liquidity pool link will be available soon!</i></p>
                
                <a href="#swap-section" class="web3-btn primary-btn" aria-label="Go to AFOX Swap Terminal">
                    🔄 Go to Swap Terminal
                </a>

                <button class="web3-btn" aria-label="Trade AFOX on Raydium">Trade AFOX on Raydium</button>
            </div>
        </section>

        <section id="aurum-nfts" class="section aurum-fox-section">
            <div class="container">
                <h2 class="aurum-heading">Aurum Fox NFT: Unleashing Digital Treasures</h2>
                <p>Beyond being a meme token, Aurum Fox aims to delve into the exciting world of Non-Fungible Tokens (NFTs). Our vision includes creating exclusive Aurum Fox NFT collections that embody the spirit of luck, prosperity, and the cunning of the fox.</p>
                <ul>
                    <li>Exclusive access to community events or channels.</li>
                    <li>Staking opportunities to earn additional AFOX tokens.</li>
                    <li>Participation in governance or decision-making for future projects.</li>
                    <li>Unique artworks celebrating the Aurum Fox brand.</li>
                </ul>
                <div class="nft-showcase">
                    <div class="nft-card">
                        <img src="https://via.placeholder.com/150/ffd700/000000?text=AFOX+NFT+1" alt="Aurum Fox Genesis NFT #001, rare first edition">
                        <h4>Aurum Fox Genesis #001</h4>
                        <p>Rare first edition collectible.</p>
                    </div>
                    <div class="nft-card">
                        <img src="https://via.placeholder.com/150/c0c0c0/000000?text=AFOX+NFT+2" alt="Aurum Fox Guardian NFT #002, grants staking bonus">
                        <h4>Aurum Fox Guardian #002</h4>
                        <p>Grants staking bonus.</p>
                    </div>
                </div>
                <p>A dedicated portion of our tokenomics is directed to the "NFT Fund" to support the development, marketing, and expansion of these future NFT projects. Stay tuned for announcements of our first official Aurum Fox NFT collection!</p>
                <button class="web3-btn" aria-label="View NFT Collection on Magic Eden">View Collection on Magic Eden</button>
            </div>
        </section>

        <section id="aurum-nfc" class="section aurum-fox-section-alt">
            <div class="container">
                <h2 class="aurum-heading">🦊 Aurum Fox NFC: Interactive Future</h2>
                <p>Dive into a new level of interaction with Aurum Fox! We are exploring the possibilities of Near Field Communication (NFC) to create a seamless connection between our digital assets and the real world.</p>

                <div class="nfc-grid">
                    <div class="nfc-item">
                        <h3>AFOX NFT Authenticity</h3>
                        <img src="https://via.placeholder.com/150?text=NFT+NFC+Scan" alt="Smartphone scanning an NFC tag on an NFT collectible" class="nfc-icon">
                        <p>Verify the authenticity of your physical Aurum Fox NFT collectibles using NFC. Simply tap your smartphone to an NFC-chipped item to instantly check its blockchain status and receive exclusive information.</p>
                    </div>
                    <div class="nfc-item">
                        <h3>Exclusive Access and Events</h3>
                        <img src="https://via.placeholder.com/150?text=Event+NFC" alt="Smartphone tapping an NFC tag for event access" class="nfc-icon">
                        <p>Use NFC tags to gain access to private community meetups, airdrops, or unique content. Your physical presence unlocks digital doors!</p>
                    </div>
                    <div class="nfc-item">
                        <h3>Interactive Advertising</h3>
                        <img src="https://via.placeholder.com/150?text=Ad+NFC+Tap" alt="Person tapping phone to an ad with NFC" class="nfc-icon">
                        <p>Advertisers can integrate NFC into their campaigns. Tap a physical NFC tag to be directed to interactive ads, special offers, or partner promotions directly on our portal.</p>
                    </div>
                </div>
                <p class="nfc-note"><i>Note: NFC functionality is under development and will be implemented in future roadmap phases.</i></p>
            </div>
        </section>

        <section id="aurum-roadmap" class="section aurum-fox-section">
            <div class="container">
                <h2 class="aurum-heading">Aurum Fox Roadmap</h2>
                <div class="roadmap-grid">
                    <div class="roadmap-item">
                        <h3>Phase 1: Launch and Awareness (Completed)</h3>
                        <ul>
                            <li>Development and deployment of the AFOX token on Solana.</li>
                            <li>Creation and launch of the liquidity pool.</li>
                            <li>Launch of official social channels (Twitter, Telegram, Discord).</li>
                            <li>First wave of memes and viral content.</li>
                            <li><strong>Minting rights revoked.</strong></li>
                            <li><strong>Freezing rights revoked.</strong></li>
                        </ul>
                    </div>
                    <div class="roadmap-item">
                        <h3>Phase 2: Community Growth and Visibility</h3>
                        <ul>
                            <li>Launch of the official Aurum Fox website (current stage).</li>
                            <li>Application for listing on CoinGecko and CoinMarketCap.</li>
                            <li>Expansion of marketing campaigns and influencer collaborations.</li>
                            <li>Hosting meme contests and airdrops for active participants.</li>
                        </ul>
                    </div>
                    <div class="roadmap-item">
                        <h3>Phase 3: Innovation and Expansion</h3>
                        <ul>
                            <li><strong>Launch of unique Aurum Fox NFT collections.</strong></li>
                            <li>Exploration of utility functions for Aurum Fox NFTs.</li>
                            <li>Potential partnerships with other Solana projects.</li>
                            <li>Development of gaming or additional utility features for AFOX (based on community demand).</li>
                            <li>Preparation for potential listings on Centralized Exchanges (CEX).</li>
                            <li>Implementation of DAO and governance.</li>
                            <li>Development of a staking platform.</li>
                            <li>**Development of a lending/borrowing platform (DeFi).**</li>
                            <li>Gaming integrations.</li>
                            <li>Multimedia portal enhancements.</li>
                            <li>NFC utility development.</li>
                            <li>Cross-chain research.</li>
                        </ul>
                    </div>
                </div>
                <p class="roadmap-disclaimer"><i>Note: The Aurum Fox roadmap is dynamic and may be adjusted based on market conditions and community feedback.</i></p>
            </div>
        </section>

        <section id="aurum-news" class="section aurum-fox-section-alt">
            <div class="container">
                <h2 class="aurum-heading">Aurum Fox News and Updates</h2>
                <div class="news-content news-list">
                    <p class="web3-placeholder">Loading News...</p>
                </div>
            </div>
        </section>

        <section id="aurum-community" class="section aurum-fox-section-alt">
            <div class="container">
                <h2 class="aurum-heading">Join the AFOX Community!</h2>
                <p>Become part of our rapidly growing and friendly community. Together, we will build something special and share the luck of Aurum Fox!</p>
                <div class="social-links">
                    <a href="https://discord.gg/AR7vnJVE" target="_blank" rel="noopener noreferrer" class="social-btn discord-btn" aria-label="Join our Discord community">
                        <svg class="social-icon" viewBox="0 0 448 512"><path fill="currentColor" d="M297.2 92.5C336.5 98.7 368 116.3 368 116.3V151.7C368 151.7 328.5 137.5 299.7 136.2C288.7 135.8 276.1 136.6 261.6 138.8C202.4 147.2 165.8 171.1 165.8 171.1L170 167.3C136.4 179.6 100.9 203.2 100.9 203.2L90.4 207.2C100.2 198.8 113.8 189.9 129.5 180.8L124.7 176.6C124.7 176.6 141.7 167 159.2 161C172.9 156.4 187.9 153.8 203.8 153.2C226.5 152.4 246.6 153.3 260.6 154.9C281.3 157.4 297.2 160 297.2 160L290.7 158.1C305.9 160.7 319.4 162.7 330.4 164.7C338.9 166.4 346.8 168.1 353.4 169.8C349.5 169.8 344.6 169.9 339.6 169.9C331.4 170.2 323 170.6 314.4 171.2C307.3 171.8 300.2 172.5 293.2 173.3C285.8 174.1 278.4 175.1 271 176.2C247.9 179.4 225.2 182.7 203.8 186.1C194.2 187.6 184.8 189.2 175.7 190.9C166.8 192.6 158.1 194.5 149.5 196.5C141.2 198.5 133.2 200.6 125.4 202.8C117.8 204.9 110.4 207.1 103.2 209.4L107.5 212.7C107.5 212.7 131.6 221 155.6 230.1C183.4 240.7 212.6 251.8 243.6 262.9C274.6 274 307.4 284.9 342.3 295.4L339.6 295.4C342.3 295.4 345 295.3 347.7 295.2L352.4 294.9C361.6 294.4 370.8 293.8 379.9 293.1C388.9 292.4 398 291.6 407 290.8C415.8 290 424.6 289.2 433.4 288.5C442.2 287.7 451 287.1 459.8 286.5L462.5 286.4C448 298.5 423.8 316.5 397.6 331.5C384.8 338.4 372.1 345.1 359.4 351.6C346.6 358.1 333.9 364.5 321.2 370.7C308.5 376.9 295.8 383.1 283.1 389.1C270.4 395.1 257.7 401.1 245 406.8C232.3 412.5 219.6 418.1 206.9 423.6C194.2 429.1 181.5 434.5 168.8 439.8C156.1 445.1 143.4 450.4 130.7 455.5L128 456C128 456 109.9 450.2 87.8 438.4C65.7 426.6 45.4 408.8 29.2 387.6L29.2 387.6L27.5 385.4C26.5 384.3 25.6 383.2 24.8 382.1C18.6 373.1 14 363.1 11.2 352.2C8.5 341.2 7.1 329.8 7.1 318C7.1 278.4 43.1 246.6 86.8 231.1C91.4 229.5 96.1 227.9 100.9 226.3C105.7 224.7 110.5 223.1 115.4 221.5C120.3 219.9 125.2 218.4 130.1 216.8C135.1 215.3 140.1 213.7 145.1 212.2C150.1 210.7 155.1 209.2 160.2 207.7C165.2 206.2 170.3 204.7 175.4 203.2C180.5 201.7 185.7 200.2 190.8 198.8C196 197.3 201.1 195.9 206.3 194.5C211.5 193.1 216.6 191.7 221.8 190.4C226.9 189 232.1 187.7 237.3 186.4C242.4 185.1 247.6 183.9 252.8 182.7C258 181.5 263.1 180.3 268.3 179.1C273.5 177.9 278.7 176.8 283.8 175.7C289 174.6 294.2 173.5 299.4 172.5C304.6 171.4 309.8 170.4 315 169.4C320.1 168.4 325.3 167.5 330.5 166.6C335.7 165.7 340.9 164.8 346.1 163.9C351.3 163.1 356.5 162.2 361.7 161.4C366.9 160.6 372.1 159.8 377.3 159.1C382.5 158.3 387.7 157.6 392.9 156.9C398.1 156.2 403.3 155.5 408.5 154.9L408.5 154.9L416.7 153.9C403.9 146.7 387.5 137 368 126.8C359.8 122.5 351.5 118.1 343.3 113.8C335.1 109.5 326.8 105.1 318.5 100.8C310.3 96.5 302 92.1 293.8 87.8L297.2 92.5ZM224 372.3C224 380.2 230.1 386.3 238 386.3C245.9 386.3 252 380.2 252 372.3C252 364.4 245.9 358.3 238 358.3C230.1 358.3 224 364.4 160 372.3Z"/></svg>
                        Discord
                    </a>
                    <a href="https://t.me/+J2c790PJUSI4OWI0" target="_blank" rel="noopener noreferrer" class="social-btn telegram-btn" aria-label="Join our Telegram channel">
                        <svg class="social-icon" viewBox="0 0 496 512"><path fill="currentColor" d="M248 8C111.03 8 0 119.03 0 256s111.03 248 248 248 248-111.03 248-248S384.97 8 248 8zm121.841 185.556l-67.453 61.248c-1.391 1.264-3.12 1.94-4.887 1.94H192.5c-3.155 0-5.748-2.593-5.748-5.748V177.16c0-3.155 2.593-5.748 5.748-5.748h22.684c3.155 0 5.748 2.593 5.748 5.748v44.204l44.383-40.354c1.391-1.264 3.12-1.94 4.887-1.94s3.496.676 4.887 1.94l13.568 12.355c3.784 3.443 3.966 9.617.408 13.24L261.2 264.408c-3.558 3.623-3.74 9.797-.408 13.24l68.212 62.062c3.784 3.443 9.957 3.26 13.568-.408l13.568-12.355c3.496-3.186 3.65-9.255.408-12.698L307.72 264.408c-3.558-3.623-3.74-9.797-.408-13.24l68.212-62.062c3.784-3.443 3.966-9.617.408-13.24l-13.568-12.355c-3.496-3.186-9.565-3.032-12.91-1.423zM157.994 286.91l-38.384 34.908c-3.784 3.443-3.966 9.617-.408 13.24l13.568 12.355c3.496 3.186 9.565 3.032 12.91-1.423l38.384-34.908c3.558-3.623 3.74-9.797-.408-13.24l-13.568-12.355c-3.496-3.186-9.565-3.032-12.91 1.423z"/></svg>
                        Telegram
                    </a>
                    <a href="https://x.com/AURUMFOX_?t=9uwh4e6XYoMRHJxZTs9bsg&s=08" target="_blank" rel="noopener noreferrer" class="social-btn twitter-btn" aria-label="Follow us on Twitter (X)">
                        <svg class="social-icon" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.2 275.5 26.8 48H172.4L272.9 183.7 389.2 48zM364.4 421.8h39.1L123.6 90.1H80.5L364.4 421.8z"/></svg>
                        Twitter (X)
                    </a>
                    <a href="https://solscan.io/token/GLkewtq8s2Yr24o5LT5mzzEeccKuSsy8H5RCHaE9uRAd" target="_blank" rel="noopener noreferrer" class="social-btn solscan-btn" aria-label="View AFOX on Solscan">
                        <svg class="social-icon" viewBox="0 0 576 512" ><path fill="currentColor" d="M573.5 241.1C559.5 245.9 544.7 248 529.7 248H528c-18.7 0-33.8 15.1-33.8 33.8v80.4c0 30.6-24.8 55.4-55.4 55.4h-35.3c-14.7 0-26.6 11.9-26.6 26.6v29.6c0 14.7 11.9 26.6 26.6 26.6H502c30.6 0 55.4-24.8 55.4-55.4v-30.8c0-10.9 9-19.9 19.9-19.9h.2c10.9 0 19.9 9 19.9 19.9v30.8c0 52.4-42.5 94.9-94.9 94.9h-35.3c-52.4 0-94.9-42.5-94.9-94.9V362.2c0-14.7-11.9-26.6-26.6-26.6h-35.3c-30.6 0-55.4-24.8-55.4-55.4V281.8c0-18.7-15.1-33.8-33.8-33.8h-1.7c-15 0-29.8-2.1-43.8-6.9-49.3-17.4-87.8-64.7-87.8-119.5C96 55.4 138.5 13 190.9 13H384c17.7 0 32 14.3 32 32s-14.3 32-32 32h-193.1c-17 0-30.8 13.8-30.8 30.8s13.8 30.8 30.8 30.8H352c17.7 0 32 14.3 32 32s-14.3 32-32 32H190.9c-52.4 0-94.9 42.5-94.9 94.9 0 32.5 16.4 61.5 41.5 78.4 2.6 1.8 5.4 3.2 8.3 4.3 12.1 4.7 24.8 7.2 37.8 7.2h1.7c18.7 0 33.8 15.1 33.8 33.8v80.4c0 30.6 24.8 55.4 55.4 55.4h35.3c14.7 0 26.6 11.9-26.6 26.6v29.6c0 14.7-11.9 26.6-26.6 26.6h-35.3c-52.4 0-94.9-42.5-94.9-94.9V409.8c0-10.9-9-19.9-19.9-19.9h-.2c-10.9 0-19.9 9-19.9 19.9v30.8c0 52.4 42.5 94.9 94.9 94.9h35.3c52.4 0 94.9-42.5 94.9-94.9V409.8c0-18.7 15.1-33.8 33.8-33.8h1.7c15 0 29.8-2.1 43.8-6.9C523.5 351.7 562 304.4 562 249.6c0-32.5-16.4-61.5-41.5-78.4z"/></svg>
                        Solscan
                    </a>
                </div>
            </div>
        </section>

        

        <section id="web3-site-home" class="section web3-section-alt">
            <div class="container">
                <h2 class="web3-heading">🎮 My Web3 Portal</h2>
                <p class="web3-intro">Explore decentralized games, manage your NFTs, and discover Web3 advertising opportunities. <strong style="color: #f39c12;">Connect your wallet in the header to activate Web3 functions.</strong></p>
                <p class="web3-wallet-display">Your Wallet Address: <strong id="walletAddressDisplay">Not Connected</strong></p>
                <div class="web3-features-grid">
                    <div class="feature-card">
                        <h3>🎮 Games</h3>
                        <p>Explore blockchain games and earn rewards.</p>
                        <a href="#games-section" class="web3-link">Go to Games</a>
                    </div>
                    <div class="feature-card">
                        <h3>🖼️ NFTs</h3>
                        <p>Browse your NFT collections, mint new ones, and explore marketplaces.</p>
                        <a href="#nft-section" class="web3-link">Explore NFTs</a>
                    </div>
                     <div class="feature-card">
                        <h3>🏛️ DAO</h3>
                        <p>Participate in governance and vote on proposals.</p>
                        <a href="#dao-section" class="web3-link">Go to DAO</a>
                    </div>
                    <div class="feature-card">
                        <h3>💰 Staking</h3>
                        <p>Stake your AFOX tokens to earn passive income.</p>
                        <a href="#staking-section" class="web3-link">Start Staking</a>
                    </div>
                     <div class="feature-card">
                        <h3>🏦 Lending</h3>
                        <p>Lend or borrow crypto assets.</p>
                        <a href="#lending-section" class="web3-link">Go to Lending</a> </div>
                     <div class="feature-card">
                        <h3>🔄 Swap</h3>
                        <p>Exchange AFOX for other tokens easily.</p>
                        <a href="#swap-section" class="web3-link">Go to Swap</a>
                    </div>
                </div>
            </div>
        </section>

        <section id="games-section" class="section web3-section">
            <div class="container">
                <h2 class="web3-heading">🕹️ Games</h2>
                <p>This section will display user-uploaded games.</p>
                <button id="uploadGameBtnWeb3" class="web3-btn" aria-label="Upload a new game">Upload New Game</button>
                <div id="game-list" class="content-area web3-content-area games-grid">
                    <p class="web3-placeholder">Loading Games...</p>
                </div>
                <button id="loadMoreGamesBtn" class="web3-btn" aria-label="Load More Games">Load More Games</button>
            </div>
        </section>

        <section id="nft-section" class="section web3-section-alt">
            <div class="container">
                <h2 class="web3-heading">🖼️ NFT Collections</h2>
                <p>Manage your NFTs directly from the website! <strong style="color: #f39c12;">Connect your wallet to enable these features.</strong></p>

                <div class="nft-actions">
                    <button id="viewMyNftsBtn" class="web3-btn" aria-label="View my NFTs">View My NFTs</button>
                    <button id="mintNftBtn" class="web3-btn" aria-label="Mint a new NFT">Mint New NFT</button>
                </div>

                <h3 class="web3-subheading">Your NFTs:</h3>
                <div id="user-nft-list" class="content-area web3-content-area nft-grid">
                    <p class="placeholder-item web3-placeholder">Connect your wallet to see your NFTs.</p>
                </div>

                <h3 class="web3-subheading">List your NFT for sale:</h3>
                <div class="nft-form-container">
                    <form id="listNftForm" class="web3-form">
                        <label for="nftToSell">Select NFT to sell:</label>
                        <select id="nftToSell" name="nftToSell" required aria-required="true">
                            <option value="">-- Please select an NFT --</option>
                            </select>

                        <label for="salePrice">Sale Price (SOL):</label>
                        <input type="number" id="salePrice" name="salePrice" step="0.000001" min="0.000001" placeholder="e.g., 0.5" required aria-required="true">

                        <label for="listingDuration">Listing Duration (Days):</label>
                        <input type="number" id="listingDuration" name="listingDuration" min="1" max="365" value="7" required aria-required="true">

                        <button type="submit" class="web3-btn" aria-label="List NFT for sale">List NFT</button>
                    </form>
                </div>

                <h3 class="web3-subheading">NFTs from Marketplaces:</h3>
                <div id="marketplace-nft-list" class="content-area web3-content-area nft-grid">
                    <p class="placeholder-item web3-placeholder">Loading NFTs from Magic Eden...</p>
                </div>
            </div>
        </section>

        <section id="mint-nft-section" class="section web3-section">
            <div class="container">
                <h2 class="web3-heading">✨ Create Your Own NFT (Minting)</h2>
                <p>Unleash your creativity! Upload your artwork and mint it as a unique NFT on the Solana blockchain. <strong style="color: #f39c12;">Requires connected wallet.</strong></p>

                <div class="nft-form-container">
                    <form id="mintNftFormSection" class="web3-form" enctype="multipart/form-data">
                        <label for="nftFile">Upload Image/Video:</label>
                        <input type="file" id="nftFile" name="nftFile" accept="image/*,video/*" required aria-required="true">

                        <label for="mintNftName">NFT Name:</label>
                        <input type="text" id="mintNftName" name="mintNftName" placeholder="e.g., My Masterpiece #1" required aria-required="true">

                        <label for="mintNftDescription">Description:</label>
                        <textarea id="mintNftDescription" name="mintNftDescription" rows="4" placeholder="Tell us about your NFT..." required aria-required="true"></textarea>

                        <label for="mintNftAttributes">Attributes (e.g., "Background: Blue, Eyes: Green"):</label>
                        <textarea id="mintNftAttributes" name="mintNftAttributes" rows="3" placeholder="Enter attributes in JSON or plain text, e.g., {'Rarity': 'Rare', 'Type': 'Art'}"></textarea>
                        <small class="form-help-text">Please use JSON format for attributes for better compatibility.</small>

                        <button type="submit" class="web3-btn" aria-label="Mint NFT">Mint NFT</button>
                    </form>
                </div>
            </div>
        </section>

        <section id="dao-section" class="section web3-section-alt">
            <div class="container">
                <h2 class="web3-heading">🏛️ Decentralized Autonomous Organization (DAO)</h2>
                <p class="web3-intro">Participate in Aurum Fox governance! Create proposals, vote, and shape the future of the project. <strong style="color: #f39c12;">Requires connected wallet.</strong></p>

                <div class="dao-actions">
                    <button id="createProposalBtn" class="web3-btn" aria-label="Create new DAO proposal">Create Proposal</button>
                </div>

                <h3 class="web3-subheading">Active Proposals</h3>
                <div id="active-proposals-list" class="content-area web3-content-area dao-proposals-grid">
                    <div class="dao-proposal-item web3-placeholder">
                        <h4>Loading Proposal #1</h4>
                        <p>Description: Real-time DAO proposals are loading here.</p>
                        <p>Creator: <span class="dao-creator">...</span></p>
                        <p>Votes For: <span class="dao-votes-for">...</span> | Votes Against: <span class="dao-votes-against">...</span></p>
                        <button class="web3-btn dao-vote-btn" data-proposal-id="1" data-vote-type="for" aria-label="Vote FOR Proposal 1">Vote FOR</button>
                        <button class="web3-btn dao-vote-btn" data-proposal-id="1" data-vote-type="against" aria-label="Vote AGAINST Proposal 1">Vote AGAINST</button>
                    </div>
                </div>

                <h3 class="web3-subheading">Completed Proposals</h3>
                <div id="completed-proposals-list" class="content-area web3-content-area dao-proposals-grid">
                    <p class="web3-placeholder">No completed proposals yet.</p>
                </div>

                <div id="createProposalModal" class="modal" aria-modal="true" role="dialog" aria-labelledby="newProposalModalTitle" style="display:none;">
                    <div class="modal-content">
                        <span class="close-button" id="closeProposalModal" aria-label="Close create proposal modal">&times;</span>
                        <h3 id="newProposalModalTitle" class="web3-heading">Create New DAO Proposal</h3>
                        <form id="newProposalForm" class="web3-form">
                            <label for="proposalTitle">Proposal Title:</label>
                            <input type="text" id="proposalTitle" name="proposalTitle" placeholder="Enter proposal title" required aria-required="true">

                            <label for="proposalDescription">Proposal Description:</label>
                            <textarea type="text" id="proposalDescription" name="proposalDescription" rows="6" placeholder="Describe your proposal in detail..." required aria-required="true"></textarea>

                            <button type="submit" class="web3-btn" aria-label="Submit new proposal">Submit Proposal</button>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        <section id="staking-section" class="section web3-section">
            <div class="container">
                <h2 class="web3-heading">💰 AFOX Staking</h2>
                <p class="web3-intro">Stake your AFOX tokens to earn passive income and participate in project governance! <strong style="color: #f39c12;">Requires connected wallet.</strong></p>
                
                <div class="staking-info-grid">
                    <div class="info-card">
                        <h3>Your AFOX Balance</h3>
                        <p id="userAfoxBalance" class="info-value">0 AFOX</p>
                    </div>
                    <div class="info-card">
                        <h3>Your Staked Amount</h3>
                        <p id="userStakedAmount" class="info-value">0 AFOX</p>
                    </div>
                    <div class="info-card">
                        <h3>Accrued Rewards</h3>
                        <p id="userRewardsAmount" class="info-value">0 AFOX</p>
                    </div>
                    <div class="info-card">
                        <h3>Annual Percentage Rate (APR)</h3>
                        <p id="stakingApr" class="info-value">--%</p>
                    </div>
                </div>

                <div class="staking-actions">
                    <h3 class="web3-subheading">Stake AFOX</h3>
                    <div class="input-group">
                        <input type="number" id="stakeAmountInput" min="0.000001" step="0.000001" placeholder="Enter AFOX amount to stake" aria-label="Amount to stake">
                        <button id="stakeAfoxBtn" class="web3-btn" aria-label="Stake AFOX tokens">Stake</button>
                    </div>
                    
                    <h3 class="web3-subheading">Unstake AFOX (Withdraw)</h3>
                    <div class="input-group">
                        <input type="number" id="unstakeAmountInput" min="0.000001" step="0.000001" placeholder="Enter AFOX amount to unstake" aria-label="Amount to unstake">
                        <button id="unstakeAfoxBtn" class="web3-btn" aria-label="Unstake AFOX tokens">Unstake Tokens</button>
                    </div>
                    
                    <h3 class="web3-subheading">Claim Rewards</h3>
                    <button id="claimRewardsBtn" class="web3-btn" aria-label="Claim AFOX staking rewards">Claim Rewards</button>
                </div>

                <div class="staking-details">
                    <h3 class="web3-subheading">Staking Details</h3>
                    <ul>
                        <li><strong>Minimum staking amount:</strong> <span id="minStakeAmount">1 AFOX</span></li>
                        <li><strong>Lockup period:</strong> <span id="lockupPeriod">0 days (flexible)</span></li>
                        <li><strong>Early unstake fee:</strong> <span id="unstakeFee">0%</span></li>
                        <li><strong>Reward calculation:</strong> <span id="rewardCalculation">Daily</span></li>
                    </ul>
                    <p class="web3-note">Please connect your wallet to see live data and interact with staking.</p>
                </div>
            </div>
        </section>

        <section id="lending-section" class="section web3-section-alt">
            <div class="container">
                <h2 class="web3-heading">🏦 AFOX DeFi Lending (Lending & Borrowing)</h2>
                <p class="web3-intro">Lend AFOX or SOL to liquidity pools to earn interest, or use them as collateral to take out a loan. <strong style="color: #f39c12;">Requires connected wallet.</strong></p>

                <div class="staking-info-grid">
                    <div class="info-card">
                        <h3>APR for Lending (AFOX)</h3>
                        <p id="afoxLendApr" class="info-value">--%</p>
                    </div>
                    <div class="info-card">
                        <h3>Borrowing Rate (SOL)</h3>
                        <p id="solBorrowRate" class="info-value">--%</p>
                    </div>
                    <div class="info-card">
                        <h3>Your Lent Amount</h3>
                        <p id="userLentAmount" class="info-value">0 AFOX</p>
                    </div>
                    <div class="info-card">
                        <h3>Your Loan</h3>
                        <p id="userBorrowedAmount" class="info-value">0 SOL</p>
                    </div>
                </div>

                <div class="staking-actions" style="margin-top: 30px;">
                    <h3 class="web3-subheading">Lend AFOX</h3>
                    <div class="input-group">
                        <input type="number" id="lendAmountInput" min="0.000001" step="0.000001" placeholder="Enter AFOX to lend" aria-label="Amount to lend">
                        <button id="lendAfoxBtn" class="web3-btn" aria-label="Lend AFOX tokens">Lend</button>
                    </div>
                    <h3 class="web3-subheading">Withdraw Lent AFOX</h3>
                    <div class="input-group">
                        <input type="number" id="withdrawLendAmountInput" min="0.000001" step="0.000001" placeholder="Enter AFOX to withdraw" aria-label="Amount to withdraw from lending">
                        <button id="withdrawLendBtn" class="web3-btn" aria-label="Withdraw lent AFOX tokens">Withdraw</button>
                    </div>
                </div>

                <div class="staking-actions" style="margin-top: 30px;">
                    <h3 class="web3-subheading">Borrow SOL</h3>
                    <div class="input-group">
                        <input type="number" id="borrowAmountInput" min="0.000001" step="0.000001" placeholder="Enter SOL to borrow" aria-label="Amount to borrow">
                        <button id="borrowSolBtn" class="web3-btn" aria-label="Borrow SOL">Borrow</button>
                    </div>
                    <h3 class="web3-subheading">Repay SOL Loan</h3>
                    <div class="input-group">
                        <input type="number" id="repayAmountInput" min="0.000001" step="0.000001" placeholder="Enter SOL to repay" aria-label="Amount to repay">
                        <button id="repaySolBtn" class="web3-btn" aria-label="Repay SOL loan">Repay Loan</button>
                    </div>
                </div>
                
                <div class="staking-details">
                    <h3 class="web3-subheading">Lending Terms</h3>
                    <ul>
                        <li><strong>Loan-to-Value (LTV) Limit:</strong> <span id="ltvRatio">75%</span></li>
                        <li><strong>AFOX in Pool:</strong> <span id="poolAfoxAmount">... AFOX</span></li>
                        <li><strong>SOL in Pool:</strong> <span id="poolSolAmount">... SOL</span></li>
                    </ul>
                    <p class="web3-note">DeFi Lending functionality is under development and requires connection to a Solana protocol.</p>
                </div>
            </div>
        </section>
        <section id="swap-section" class="section web3-section-alt">
            <div class="container">
                <h2 class="web3-heading">🔄 AFOX Swap & Live Trading</h2>
                <p class="web3-intro">
                    Swap your AFOX tokens for SOL or other SPL tokens directly, and track the live market price!
                    For exchange, use **Jupiter Terminal** — the best liquidity aggregator on Solana.
                </p>

                <div class="swap-interface">
                    <h3 class="web3-subheading">⚡️ Jupiter Terminal (AFOX Swap)</h3>
                    <p>Connect your wallet and swap AFOX at the best rate.</p>
                    
                    <div id="afoxChartContainer" style="min-height: 250px; margin: 15px auto;">
                        <iframe 
                            src="https://birdeye.so/token/GLkewtq8s2Yr24o5LT5mzzEeccKuSsy8H5RCHaE9uRAd?chain=mainnet&amp;theme=dark&amp;chart=true" 
                            width="100%" 
                            height="250px" 
                            style="border:none; border-radius: 8px;">
                        </iframe>
                    </div>
                    
                    <div id="jupiter-swap-widget" style="min-height: 400px; max-width: 450px; margin: 20px auto; position: relative; z-index: 10000;">
                    </div>
                </div>
            </div>
        </section>
        
        </main>

    <footer class="footer">
        <div class="container">
            <div class="geckoterminal-promo" style="margin-bottom: 15px;">
                <p style="font-size: 1.1em; font-weight: 600; margin-bottom: 5px;">Track AFOX Price on:</p>
                <a href="https://www.geckoterminal.com/solana/pools/FxkhmwaB144YDemgrfX4K5W2Jotz8YXaFpkMD4Pa9JKz" 
                   target="_blank" 
                   rel="noopener noreferrer" 
                   style="display: inline-block; padding: 10px 15px; background-color: #00bf75; color: #fff; border-radius: 8px; text-decoration: none; font-weight: bold; transition: background-color 0.3s ease;">
                    <img src="https://www.geckoterminal.com/favicon-16x16.png" alt="GeckoTerminal Logo" style="height: 16px; margin-right: 8px; vertical-align: middle;">
                    View on GeckoTerminal
                </a>
            </div>
            
            <div class="disclaimer-area" style="margin-top: 20px; padding-top: 15px; border-top: 1px solid rgba(255, 255, 255, 0.1);">
                <p style="font-size: 0.85em; color: #aaa; text-align: center;">
                    <span style="color: #e74c3c; font-weight: bold;">DISCLAIMER:</span>
                    Aurum Fox (AFOX) is a decentralized meme token created by the community. 
                    We are not financial advisors, and the information on this portal is not investment advice. 
                    Investments in cryptocurrencies, including AFOX, are associated with high risk and can lead to complete loss of funds. 
                    The user assumes full responsibility for all their trading and investment decisions. 
                    We are not responsible for any losses or damages associated with the use of this portal.
                </p>
            </div>
            <p style="margin-top: 15px;">&copy; 2025 Aurum Fox Unified Portal. All rights reserved.</p>
            <p>Created with ❤️ for the Web3 community.</p>
            <p>Contract Address: <span id="footerContractAddress">GLkewtq8s2Yr24o5LT5mzzEeccKuSsy8H5RCHaE9uRAd</span> </p>
            </div>
    </footer>

    <div id="nftDetailsModal" class="modal" aria-modal="true" role="dialog" aria-labelledby="nftDetailName" style="display:none;">...</div>
    <div id="mintNftModal" class="modal" aria-modal="true" role="dialog" aria-labelledby="mintNftModalTitle" style="display:none;">...</div>
    <div id="notificationContainer" style="position: fixed; top: 20px; right: 20px; z-index: 10000;"></div>
    
    <script src="https://terminal.jup.ag/main-v2.js" data-preload></script>

    <script id="main-inline-script">
        
        /******************************************************************
         * !!! КРИТИЧЕСКОЕ ПРЕДУПРЕЖДЕНИЕ О БЕЗОПАСНОСТИ БЭКЕНДА !!!
         * * Фронтенд защищен от XSS, но полная безопасность требует
         * * СТРОГИХ ПРАВИЛ БЕЗОПАСНОСТИ Firebase.
         * * ВНИМАНИЕ: Все формы записи (Mint NFT, DAO, Upload Game)
         * * ЗАБЛОКИРОВАНЫ ФУНКЦИЕЙ preventSubmission, пока вы не
         * * настроите бэкенд-защиту и аутентификацию администратора!
         ******************************************************************/
        
        // 2. YOUR CONFIGURATION WITH KEYS (Public keys for client access)
        const firebaseConfig = {
            // ВАЖНО: ЗАМЕНИТЕ ЭТОТ ПЛЕЙСХОЛДЕР НА ВАШ РЕАЛЬНЫЙ КЛЮЧ!
            apiKey: "FIREBASE_API_KEY_PLACEHOLDER", 
            authDomain: "aurum-fox.firebaseapp.com",
            projectId: "aurum-fox",
            storageBucket: "aurum-fox.firebasestorage.app",
            messagingSenderId: "650661732233",
            appId: "1:650661732233:web:e8b12d73c1df56cde70b58",
            measurementId: "G-L9XHK0DPB7" 
        };
        
        // 3. INITIALIZATION
        const app = firebase.initializeApp(firebaseConfig);
        const db = app.firestore();
        const auth = app.auth();
        const storage = app.storage();
        
        const COLLECTIONS = {
            NEWS: 'news',
            GAMES: 'games',
        };

        const AFOX_MINT = 'GLkewtq8s2Yr24o5LT5mzzEeccKuSsy8H5RCHaE9uRAd';
        const SOL_MINT = 'So11111111111111111111111111111111111111112';
        
        let solanaWalletAdapter = null;
        
        // --- XSS PROTECTION & NOTIFICATIONS ---
        function sanitizeText(text) {
            if (!text) return '';
            const map = { '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#x27;', '/': '&#x2F;' };
            const reg = /[&<>"'\/]/ig;
            // Используем String.prototype.replace с функцией замены для корректного экранирования
            return (text.toString()).replace(reg, (match)=>(map[match]));
        }

        function showNotification(message, type = 'info', duration = 3000) {
            const container = document.getElementById('notificationContainer');
            if (!container) return;
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            // БЕЗОПАСНО: Используем textContent для предотвращения XSS
            notification.textContent = message; 
            notification.style.cssText = `
                margin-bottom: 10px; padding: 10px 15px; border-radius: 8px; color: #fff; font-size: 0.9em; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
                background-color: ${type === 'success' ? '#2ecc71' : type === 'error' ? '#e74c3c' : type === 'warning' ? '#f39c12' : '#3498db'};
                transition: opacity 0.5s ease-in-out; z-index: 10000;
            `;
            container.appendChild(notification);
            setTimeout(() => { notification.style.opacity = '0'; setTimeout(() => notification.remove(), 500); }, duration);
        }
        // --- /XSS PROTECTION & NOTIFICATIONS ---


        // ====================================================================
        // 🛑 БЛОК 1: КОНФИГУРАЦИЯ RUST/ANCHOR (ВСТАВИТЬ СЮДА!)
        // ====================================================================
        
        // ⚠️ ЗАМЕНИТЕ ЭТИ АДРЕСА И IDL!
        const STAKING_PROGRAM_ID = new window.solanaWeb3.PublicKey("СТАВЬ_АДРЕС_ПРОГРАММЫ_RUST_СЮДА"); 
        const POOL_STATE_ID = new window.solanaWeb3.PublicKey("СТАВЬ_АДРЕС_POOL_STATE_PDA_СЮДА"); 
        // Семена (сиды), которые использовались в lib.rs:
        const STAKING_POOL_SEED = "alphafox_pool_pda"; // Для PoolState
        const USER_STAKING_SEED = "alphafox_staking_pda"; // Для UserStakingAccount
        const AFOX_DECIMALS = 6; // Количество десятичных знаков вашего AFOX-токена (обычно 6 или 9)

        // ⚠️ ВСТАВЬТЕ СЮДА ВАШ ПОЛНЫЙ IDL JSON, полученный из target/idl/
        const IDL = { 
            "version": "0.1.0",
            "name": "aurum_fox_staking",
            // ------------------------------------
            // !!! ВСТАВЬТЕ ЗДЕСЬ ВСЕ СОДЕРЖИМОЕ JSON-ФАЙЛА IDL !!!
            // ------------------------------------
            "instructions": [
                // Ваш JSON код инструкций
            ],
            "accounts": [
                // Ваш JSON код аккаунтов (PoolState, UserStakingAccount)
            ],
            // ------------------------------------
            // !!! ВАШ ПОЛНЫЙ IDL JSON СЮДА !!!
            // ------------------------------------
        }; 
        
        // ====================================================================


        // --- SOLANA WALLET ADAPTER LOGIC ---
        const connection = new solanaWeb3.Connection(solanaWeb3.clusterApiUrl('mainnet-beta'));

        function updateWalletUI(adapter) {
            const btn = document.getElementById('connectWalletBtn');
            const display = document.getElementById('walletAddressDisplay');
            
            if (adapter && adapter.connected && adapter.publicKey) {
                const publicKey = adapter.publicKey.toString();
                
                btn.textContent = `Connected: ${publicKey.substring(0, 4)}...${publicKey.slice(-4)}`;
                btn.classList.add('connected');
                
                display.innerHTML = '';
                const strong = document.createElement('strong');
                strong.textContent = `***${publicKey.substring(0, 8)}...${publicKey.slice(-8)}***`;
                display.appendChild(strong);
                
                // Установка обработчика отключения
                btn.removeEventListener('click', connectWallet);
                btn.addEventListener('click', disconnectWallet);

                // 💡 ВАЖНО: Вызов функции обновления стейкинга после подключения
                fetchStakingState(); 

            } else {
                btn.textContent = 'Connect Wallet';
                btn.classList.remove('connected');
                display.textContent = 'Not Connected';
                
                // Установка обработчика подключения
                btn.removeEventListener('click', disconnectWallet);
                btn.addEventListener('click', connectWallet);

                // Очистка UI стейкинга при отключении
                document.getElementById('userAfoxBalance').textContent = '0 AFOX';
                document.getElementById('userStakedAmount').textContent = '0 AFOX';
                document.getElementById('userRewardsAmount').textContent = '0 AFOX';
            }
        }

        async function connectWallet() {
            const btn = document.getElementById('connectWalletBtn');
            btn.disabled = true;
            btn.textContent = 'Connecting...';

            try {
                const adapter = new window.solanaWalletAdapterPhantom.PhantomWalletAdapter();
                
                // Используем адаптер как синглтон
                solanaWalletAdapter = adapter;

                adapter.on('connect', () => {
                    updateWalletUI(adapter);
                    showNotification('Wallet successfully connected!', 'success');
                });
                adapter.on('disconnect', () => {
                    solanaWalletAdapter = null;
                    updateWalletUI(null);
                    showNotification('Wallet disconnected.', 'info');
                });

                await adapter.connect();

            } catch (error) {
                console.error('Wallet connection error:', error);
                let errorMessage = 'Connection Error';
                
                if (error.name === 'WalletNotReadyError') {
                        errorMessage = 'Please install Phantom Wallet.';
                } else if (error.name === 'WalletConnectionError') {
                        errorMessage = 'Connection rejected.';
                }
                
                showNotification(errorMessage, 'error', 5000);
                updateWalletUI(null);

            } finally {
                btn.disabled = false;
            }
        }
        
        async function disconnectWallet() {
            if (solanaWalletAdapter) {
                try {
                    await solanaWalletAdapter.disconnect();
                } catch (error) {
                    console.error('Error disconnecting wallet:', error);
                    showNotification('Error during disconnection.', 'error');
                }
            }
        }
        // --- /SOLANA WALLET ADAPTER LOGIC ---


        // ====================================================================
        // 💡 БЛОК 2: ОСНОВНАЯ ЛОГИКА ANCHOR/WEB3 (ВКЛЮЧАЯ STAKING)
        // ====================================================================

        /** Инициализирует объект Anchor Program. */
        function getProgram() {
            if (!solanaWalletAdapter || !solanaWalletAdapter.publicKey) {
                showNotification("Please connect your wallet first.", 'warning');
                return null;
            }

            // Убедимся, что window.Buffer доступен (загружен из CDN)
            if (typeof window.Buffer === 'undefined' && typeof Buffer !== 'undefined') {
                window.Buffer = Buffer;
            }

            const provider = new window.anchor.AnchorProvider(
                connection, 
                solanaWalletAdapter, 
                { commitment: 'confirmed' }
            );
            window.anchor.setProvider(provider);
            
            return new window.anchor.Program(IDL, STAKING_PROGRAM_ID, provider);
        }

        /** Вычисляет PDA-адреса. */
        function getStakingPDAs(stakerPubkey, poolStatePubkey) {
            // Pool Authority PDA (для подписи transfer, если нужно)
            const [poolAuthorityPda] = window.solanaWeb3.PublicKey.findProgramAddressSync(
                [Buffer.from(STAKING_POOL_SEED)], 
                STAKING_PROGRAM_ID
            );

            // User Staking Account PDA
            const [userStakingAccount] = window.solanaWeb3.PublicKey.findProgramAddressSync(
                [Buffer.from(USER_STAKING_SEED), stakerPubkey.toBuffer(), poolStatePubkey.toBuffer()],
                STAKING_PROGRAM_ID
            );

            return { poolAuthorityPda, userStakingAccount };
        }

        /** Функция-помощник для получения ATA (Associated Token Account). */
        async function getAssociatedTokenAccountAddress(mint, owner) {
            return window.splToken.getAssociatedTokenAddress(
                new window.solanaWeb3.PublicKey(mint),
                owner,
                false, 
                window.splToken.TOKEN_PROGRAM_ID,
                window.splToken.ASSOCIATED_TOKEN_PROGRAM_ID
            );
        }

        /** Читает состояние и обновляет UI. */
        async function fetchStakingState() {
            const program = getProgram();
            const pubkey = solanaWalletAdapter.publicKey;
            if (!program || !pubkey) return;

            try {
                // 1. Получаем общие PDA
                const { poolAuthorityPda, userStakingAccount } = getStakingPDAs(pubkey, POOL_STATE_ID);
                
                // 2. Получаем ATA кошелька
                const userAfoxAta = await getAssociatedTokenAccountAddress(AFOX_MINT, pubkey);
                
                // 3. Получаем данные PoolState (для APR, общей информации)
                let poolStateData = null;
                try {
                    poolStateData = await program.account.poolState.fetch(POOL_STATE_ID);
                    // Предполагаем, что APR хранится в basis points (BPS)
                    const apr = (poolStateData.apyBasisPoints.toNumber() / 100).toFixed(2);
                    document.getElementById('stakingApr').textContent = `${apr}%`;
                } catch (e) {
                    console.warn("Could not fetch PoolState. Is the program initialized?", e);
                    document.getElementById('stakingApr').textContent = '--%';
                }

                // 4. Получаем баланс AFOX кошелька
                let afoxBalance = 0;
                try {
                    const ataAccount = await window.splToken.getAccount(connection, userAfoxAta);
                    afoxBalance = Number(ataAccount.amount) / Math.pow(10, AFOX_DECIMALS);
                } catch (e) {
                    afoxBalance = 0;
                }
                document.getElementById('userAfoxBalance').textContent = `${afoxBalance.toFixed(2)} AFOX`;
                
                // 5. Получаем данные UserStakingAccount (стейк и награды)
                let stakedAmount = 0;
                let rewardsAmount = 0;
                let lockupEndTime = 0;

                try {
                    const stakingData = await program.account.userStakingAccount.fetch(userStakingAccount);
                    
                    stakedAmount = Number(stakingData.stakedAmount.toNumber()) / Math.pow(10, AFOX_DECIMALS);
                    rewardsAmount = Number(stakingData.earnedRewards.toNumber()) / Math.pow(10, AFOX_DECIMALS); 
                    
                    lockupEndTime = stakingData.lockupEndTime.toNumber();
                    
                } catch (e) {
                    console.log("User Staking Account not found. Staked amount defaults to 0.", e);
                }

                document.getElementById('userStakedAmount').textContent = `${stakedAmount.toFixed(2)} AFOX`;
                document.getElementById('userRewardsAmount').textContent = `${rewardsAmount.toFixed(2)} AFOX`;

                // 6. Обновление UI-защиты (Lockup)
                const now = Date.now() / 1000;
                const isLocked = lockupEndTime > now;
                const unstakeBtn = document.getElementById('unstakeAfoxBtn');
                const lockupDisplay = document.getElementById('lockupPeriod');

                if (isLocked) {
                    const remainingSeconds = lockupEndTime - now;
                    const remainingDays = (remainingSeconds / (60 * 60 * 24)).toFixed(1);
                    lockupDisplay.textContent = `${remainingDays} days remaining`;
                    
                    if (unstakeBtn) {
                        unstakeBtn.disabled = true;
                        unstakeBtn.textContent = 'Locked (Wait)';
                    }
                } else {
                    lockupDisplay.textContent = '0 days (Flexible)';
                    if (unstakeBtn) {
                        unstakeBtn.disabled = stakedAmount === 0; // Нельзя вывести, если ничего не застейкано
                        unstakeBtn.textContent = 'Unstake Tokens';
                    }
                }


            } catch (error) {
                console.error("Error fetching staking state:", error);
                showNotification("Error loading staking data.", 'error');
            }
        }


        /** Обрабатывает транзакцию Staking. */
        async function handleStake() {
            const program = getProgram();
            const pubkey = solanaWalletAdapter.publicKey;
            if (!program || !pubkey) return;

            const amountInput = document.getElementById('stakeAmountInput');
            let amount = parseFloat(amountInput.value);

            if (isNaN(amount) || amount <= 0) {
                showNotification("Please enter a valid amount to stake.", 'warning');
                return;
            }

            const btn = document.getElementById('stakeAfoxBtn');
            btn.disabled = true;
            btn.textContent = 'Staking...';

            try {
                // Конвертация в лампарты (u64) и BN
                const amountLamports = amount * Math.pow(10, AFOX_DECIMALS);
                const bnAmount = new window.BN(amountLamports);

                // Получение PDA и ATA
                const { userStakingAccount } = getStakingPDAs(pubkey, POOL_STATE_ID);
                const userAfoxAta = await getAssociatedTokenAccountAddress(AFOX_MINT, pubkey);
                const poolAfoxAta = await getAssociatedTokenAccountAddress(AFOX_MINT, getStakingPDAs(pubkey, POOL_STATE_ID).poolAuthorityPda); // ATA PoolAuthority

                const tx = await program.methods
                    .stake(bnAmount)
                    .accounts({
                        staker: pubkey,
                        poolState: POOL_STATE_ID,
                        userStakingAccount: userStakingAccount,
                        stakerAfoxAta: userAfoxAta,
                        poolAfoxAta: poolAfoxAta,
                        afoxMint: new window.solanaWeb3.PublicKey(AFOX_MINT),
                        tokenProgram: window.splToken.TOKEN_PROGRAM_ID,
                        systemProgram: window.solanaWeb3.SystemProgram.programId,
                        rent: window.solanaWeb3.SYSVAR_RENT_PUBKEY,
                        associatedTokenProgram: window.splToken.ASSOCIATED_TOKEN_PROGRAM_ID,
                    })
                    .rpc();

                showNotification(`Stake successful! Transaction: ${tx.substring(0, 10)}...`, 'success', 5000);
                amountInput.value = '';

            } catch (error) {
                console.error("Staking failed:", error);
                let errorMessage = error.message || "An unknown error occurred during staking.";
                
                if (errorMessage.includes("0x1771")) { 
                    errorMessage = "Insufficient AFOX balance or failed to find token account (ATA).";
                } else if (errorMessage.includes("custom program error: 0x")) {
                    errorMessage = `Program error: ${errorMessage.split("custom program error: ")[1]}.`;
                }
                
                showNotification(`Staking failed: ${errorMessage.substring(0, 100)}...`, 'error', 7000);
                
            } finally {
                btn.disabled = false;
                btn.textContent = 'Stake';
                fetchStakingState(); // Обновление UI
            }
        }


        /** Обрабатывает Unstaking. */
        async function handleUnstake() {
            const program = getProgram();
            const pubkey = solanaWalletAdapter.publicKey;
            if (!program || !pubkey) return;

            const amountInput = document.getElementById('unstakeAmountInput');
            let amount = parseFloat(amountInput.value);

            if (isNaN(amount) || amount <= 0) {
                showNotification("Please enter a valid amount to unstake.", 'warning');
                return;
            }

            const btn = document.getElementById('unstakeAfoxBtn');
            btn.disabled = true;
            btn.textContent = 'Unstaking...';

            try {
                // Конвертация в лампарты (u64) и BN
                const amountLamports = amount * Math.pow(10, AFOX_DECIMALS);
                const bnAmount = new window.BN(amountLamports);

                // Получение PDA и ATA
                const { poolAuthorityPda, userStakingAccount } = getStakingPDAs(pubkey, POOL_STATE_ID);
                const userAfoxAta = await getAssociatedTokenAccountAddress(AFOX_MINT, pubkey);
                const poolAfoxAta = await getAssociatedTokenAccountAddress(AFOX_MINT, poolAuthorityPda); 

                // Проверка лок-апа (для двойной защиты, если fetchStakingState не успел обновить UI)
                const stakingData = await program.account.userStakingAccount.fetch(userStakingAccount);
                const now = Date.now() / 1000;
                if (stakingData.lockupEndTime.toNumber() > now) {
                    showNotification("Cannot unstake: Tokens are still locked!", 'error', 5000);
                    return;
                }
                // Проверка, что сумма не превышает застейканную
                const stakedLamports = stakingData.stakedAmount.toNumber();
                if (bnAmount.toNumber() > stakedLamports) {
                    showNotification(`Unstake amount (${amount}) exceeds staked amount.`, 'error', 5000);
                    return;
                }

                const tx = await program.methods
                    .unstake(bnAmount)
                    .accounts({
                        staker: pubkey,
                        poolState: POOL_STATE_ID,
                        userStakingAccount: userStakingAccount,
                        stakerAfoxAta: userAfoxAta,
                        poolAfoxAta: poolAfoxAta,
                        poolAuthority: poolAuthorityPda, 
                        tokenProgram: window.splToken.TOKEN_PROGRAM_ID,
                    })
                    .rpc();

                showNotification(`Unstake successful! Transaction: ${tx.substring(0, 10)}...`, 'success', 5000);
                amountInput.value = '';

            } catch (error) {
                console.error("Unstaking failed:", error);
                showNotification("Unstaking failed. See console for details.", 'error', 7000);
                
            } finally {
                btn.disabled = false;
                btn.textContent = 'Unstake Tokens';
                fetchStakingState(); // Обновление UI
            }
        }


        /** Обрабатывает Claiming Rewards. */
        async function handleClaim() {
            const program = getProgram();
            const pubkey = solanaWalletAdapter.publicKey;
            if (!program || !pubkey) return;

            const btn = document.getElementById('claimRewardsBtn');
            btn.disabled = true;
            btn.textContent = 'Claiming...';

            try {
                // Получение PDA и ATA
                const { poolAuthorityPda, userStakingAccount } = getStakingPDAs(pubkey, POOL_STATE_ID);
                const userAfoxAta = await getAssociatedTokenAccountAddress(AFOX_MINT, pubkey);
                const poolAfoxAta = await getAssociatedTokenAccountAddress(AFOX_MINT, poolAuthorityPda); 

                const tx = await program.methods
                    .claim()
                    .accounts({
                        staker: pubkey,
                        poolState: POOL_STATE_ID,
                        userStakingAccount: userStakingAccount,
                        stakerAfoxAta: userAfoxAta,
                        poolAfoxAta: poolAfoxAta,
                        poolAuthority: poolAuthorityPda, 
                        tokenProgram: window.splToken.TOKEN_PROGRAM_ID,
                    })
                    .rpc();

                showNotification(`Claim successful! Transaction: ${tx.substring(0, 10)}...`, 'success', 5000);

            } catch (error) {
                console.error("Claim failed:", error);
                let errorMessage = error.message || "An unknown error occurred during claiming.";
                
                if (errorMessage.includes("0x1785")) { 
                    errorMessage = "No rewards to claim or lockup period not ended.";
                } else if (errorMessage.includes("custom program error: 0x")) {
                    errorMessage = `Program error: ${errorMessage.split("custom program error: ")[1]}.`;
                }

                showNotification(`Claim failed: ${errorMessage.substring(0, 100)}...`, 'error', 7000);
                
            } finally {
                btn.disabled = false;
                btn.textContent = 'Claim Rewards';
                fetchStakingState(); // Обновление UI
            }
        }

        // ====================================================================


        // --- FIREBASE CONTENT LOADING (С ИСПРАВЛЕННЫМ САНИТАЙЗИНГОМ) ---
        function setupNewsListener() {
            const newsListElement = document.querySelector('.news-list');
            if (!newsListElement) return;

            db.collection(COLLECTIONS.NEWS)
                .orderBy('timestamp', 'desc')
                .limit(5)
                .onSnapshot(snapshot => { 
                    
                    newsListElement.innerHTML = '';
                    
                    if (snapshot.empty) {
                        newsListElement.innerHTML = '<p>No news yet.</p>';
                        return;
                    }
                    
                    snapshot.forEach(doc => {
                        const data = doc.data();
                        const date = data.timestamp ? new Date(data.timestamp.toDate()).toLocaleDateString('en-US') : 'N/A';
                        
                        const newsItem = document.createElement('div');
                        newsItem.className = 'news-item';
                        
                        const h4 = document.createElement('h4');
                        h4.textContent = sanitizeText(data.title || 'Title');
                        
                        const p = document.createElement('p');
                        p.textContent = sanitizeText(data.content || 'Content...');
                        
                        const small = document.createElement('small');
                        small.textContent = date;
                        
                        newsItem.appendChild(h4);
                        newsItem.appendChild(p);
                        newsItem.appendChild(small);
                        
                        newsListElement.appendChild(newsItem);
                    });

                }, error => {
                    console.error("News listener error:", error);
                    newsListElement.innerHTML = '<p style="color: #e74c3c;">Error loading news.</p>';
                });
        }

        async function fetchContentList(collectionName, listElementId) {
            const listElement = document.getElementById(listElementId);
            if (!listElement) return;
            
            try {
                const snapshot = await db.collection(collectionName).orderBy('order', 'asc').limit(10).get();

                listElement.innerHTML = '';
                
                if (snapshot.empty) {
                    listElement.innerHTML = `<p class="web3-placeholder">No data in the ${collectionName} section.</p>`;
                    return;
                }

                snapshot.forEach(doc => {
                    const data = doc.data();
                    
                    const div = document.createElement('div');
                    div.className = "placeholder-item web3-placeholder game";
                    
                    const a = document.createElement('a');
                    a.href = sanitizeText(data.url || '#');
                    a.target = '_blank';
                    a.rel = 'noopener noreferrer';
                    
                    const strong = document.createElement('strong');
                    strong.textContent = sanitizeText(data.title || 'Untitled');
                    
                    a.appendChild(strong);
                    a.appendChild(document.createTextNode(`: ${sanitizeText(data.description || 'Description missing.')}`));
                    
                    div.appendChild(a);
                    listElement.appendChild(div);
                });


            } catch (error) {
                console.error(`Error loading ${collectionName}:`, error);
                listElement.innerHTML = `<p style="color: #e74c3c;">Error loading content.</p>`;
            }
        }
        // --- /FIREBASE CONTENT LOADING ---

        // --- JUPITER TERMINAL LOGIC ---
        function initializeJupiterTerminal() {
            
            if (window.Jupiter && document.getElementById('jupiter-swap-widget')) {
                
                console.log("Jupiter Terminal initialization started.");

                window.Jupiter.init({
                    displayMode: 'widget',
                    widgetStyle: { 'container.id': 'jupiter-swap-widget', 'container.zIndex': 10000 },
                    theme: 'dark', 
                    formProps: {
                        fixedInputMint: true, 
                        initialInputMint: AFOX_MINT,
                        initialOutputMint: SOL_MINT,
                    },
                    swapSwitchboard: true, 
                    strictTokenList: false, 

                    onConnectWallet: (callback) => { 
                        if (solanaWalletAdapter && solanaWalletAdapter.connected) {
                            callback({
                                publicKey: solanaWalletAdapter.publicKey.toString(),
                                signTransaction: solanaWalletAdapter.signTransaction.bind(solanaWalletAdapter),
                                signAllTransactions: solanaWalletAdapter.signAllTransactions.bind(solanaWalletAdapter),
                            });
                        } else {
                            // Если кошелек не подключен, вызываем нашу функцию подключения
                            connectWallet();
                            callback(null); 
                        }
                    },
                    onSwapSuccess: () => { 
                        showNotification("Swap successful!", 'success'); 
                        fetchStakingState(); 
                    },
                    onError: (error) => { 
                        console.error("Jupiter Error:", error); 
                        showNotification("Swap error: See console for details.", 'error'); 
                    },
                    onClose: () => {}
                });
                
                console.log("Jupiter Terminal initialized.");

            } else {
                setTimeout(initializeJupiterTerminal, 500);
            }
        }
        // --- /JUPITER TERMINAL LOGIC ---

        // --- ФУНКЦИЯ-ЗАГЛУШКА ДЛЯ ПРЕДОТВРАЩЕНИЯ ЗАПИСИ ДАННЫХ ---
        function preventSubmission(event) {
            event.preventDefault();
            showNotification("Security Alert: Data submission is temporarily blocked. Please configure Firebase Security Rules and Admin authentication before enabling write operations (Mint, DAO, Upload Game).", 'warning', 7000);
            return false;
        }
        
        // --- STARTUP AFTER DOM LOAD ---
        document.addEventListener('DOMContentLoaded', () => {
            const connectWalletBtn = document.getElementById('connectWalletBtn');
            if (connectWalletBtn) {
                connectWalletBtn.addEventListener('click', connectWallet);
            }
            
            setupNewsListener();
            fetchContentList(COLLECTIONS.GAMES, 'game-list');

            initializeJupiterTerminal();
            
            // ====================================================================
            // 🔗 БЛОК 3: ПРИВЯЗКА КНОПОК STAKING (ВНУТРИ DOMContentLoaded!)
            // ====================================================================
            const stakeAfoxBtn = document.getElementById('stakeAfoxBtn');
            if (stakeAfoxBtn) {
                stakeAfoxBtn.addEventListener('click', handleStake);
            }
            
            const unstakeAfoxBtn = document.getElementById('unstakeAfoxBtn');
            if (unstakeAfoxBtn) {
                unstakeAfoxBtn.addEventListener('click', handleUnstake);
            }
            
            const claimRewardsBtn = document.getElementById('claimRewardsBtn');
            if (claimRewardsBtn) {
                claimRewardsBtn.addEventListener('click', handleClaim);
            }
            // ====================================================================


            // ПРИВЯЗКА ФУНКЦИИ-ЗАГЛУШКИ К ФОРМАМ ЗАПИСИ
            const mintNftFormSection = document.getElementById('mintNftFormSection');
            if (mintNftFormSection) {
                mintNftFormSection.addEventListener('submit', preventSubmission);
            }

            const newProposalForm = document.getElementById('newProposalForm');
            if (newProposalForm) {
                newProposalForm.addEventListener('submit', preventSubmission);
            }
            
            // Привязка к кнопке Upload Game
            const uploadGameBtnWeb3 = document.getElementById('uploadGameBtnWeb3');
            if (uploadGameBtnWeb3) {
                uploadGameBtnWeb3.addEventListener('click', (e) => {
                    e.preventDefault(); 
                    showNotification("Security Alert: Game upload is temporarily blocked. Please configure Firebase Security Rules and Admin authentication.", 'warning', 7000);
                });
            }
      // 💡 ВЫЗОВ ФУНКЦИИ ГАМБУРГЕР-МЕНЮ (ДОБАВЛЕНО ГАМБУРГЕР-МЕНЮ)
            setupHamburgerMenu(); 
        });
        
    </script>
</body>
</html>
