<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AlphaFox DAO | Web3 Platform</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/buffer/6.0.3/buffer.min.js"></script>
    <script>window.Buffer = window.Buffer || buffer.Buffer;</script>

    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
    <script src="https://project-serum.github.io/anchor/dist/anchor.js"></script>
    <script src="https://unpkg.com/@solana/wallet-adapter-phantom@latest/lib/index.iife.min.js"></script>
    
    <script src="https://terminal.jup.ag/main-v2.js"></script>

    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="page-loader" class="loader-overlay" style="display: none;">
        <div class="loader-content">
            <div class="spinner"></div>
            <p>–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏...</p>
        </div>
    </div>

    <div id="notification-container"></div>

    <header class="web3-header">
        <div class="logo">ALPHA<span>FOX</span></div>
        
        <button id="menuToggle" class="hamburger-menu" aria-label="–ú–µ–Ω—é">
            <span></span><span></span><span></span>
        </button>

        <nav id="mainNav" class="nav-links">
            <button id="closeMainMenuCross" class="close-menu">&times;</button>
            <a href="#staking-section">–°—Ç–µ–π–∫–∏–Ω–≥</a>
            <a href="#swap-section">–°–≤–æ–ø</a>
            <a href="#nft-section">NFT –ú–∞—Ä–∫–µ—Ç</a>
            <a href="#dao-section">DAO</a>
        </nav>

        <div class="wallet-wrapper">
            <button class="connect-wallet-btn" id="connectBtn">Connect Wallet</button>
            
            <div class="wallet-display" style="display: none;" data-wallet-control="walletDisplay">
                <span class="wallet-address-display" id="walletAddress"></span>
                <button class="copy-btn" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å">üìã</button>
            </div>
        </div>
    </header>

    <div class="nav-mobile-overlay"></div>

    <main class="content-container">
        
        <section id="staking-section" class="glass-card">
            <h2>ü¶ä AlphaFox Staking</h2>
            <div class="stats-grid">
                <div class="stat-item">
                    <label>–î–æ—Å—Ç—É–ø–Ω–æ AFOX</label>
                    <div id="user-afox-balance" class="value">0 AFOX</div>
                </div>
                <div class="stat-item">
                    <label>–í —Å—Ç–µ–π–∫–∏–Ω–≥–µ</label>
                    <div id="user-staked-amount" class="value">0 AFOX</div>
                </div>
                <div class="stat-item highlight">
                    <label>–ù–∞–≥—Ä–∞–¥—ã</label>
                    <div id="user-rewards-amount" class="value">0 AFOX</div>
                </div>
            </div>

            <div class="staking-controls">
                <div class="input-group">
                    <select id="pool-selector" class="web3-select"></select>
                    <div class="input-with-max">
                        <input type="number" id="stake-amount" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ AFOX">
                        <button class="max-amount-btn" data-input-id="stake-amount">MAX</button>
                    </div>
                </div>
                
                <div class="info-row">
                    <p>–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å: <span id="staking-apr">‚Äî</span></p>
                    <p>–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞: <span id="lockup-period">‚Äî</span></p>
                </div>

                <div class="button-group">
                    <button id="stake-afox-btn" class="btn primary-btn">Stake AFOX</button>
                    <button id="claim-rewards-btn" class="btn secondary-btn" disabled>Claim Rewards</button>
                    <button id="unstake-afox-btn" class="btn danger-btn" disabled>Unstake</button>
                </div>
            </div>
        </section>

        <section id="swap-section" class="glass-card">
            <h2>üîÑ Jupiter Swap</h2>
            <div class="swap-box">
                <div class="token-input-field">
                    <input type="number" id="swap-from-amount" placeholder="0.0">
                    <select id="swap-from-token">
                        <option value="SOL">SOL</option>
                        <option value="AFOX">AFOX</option>
                    </select>
                </div>
                <div class="balance-info">Balance: <span id="swap-from-balance">0</span></div>

                <button id="swap-direction-btn" class="swap-divider">‚Üì‚Üë</button>

                <div class="token-input-field">
                    <input type="number" id="swap-to-amount" placeholder="0.0" readonly>
                    <select id="swap-to-token">
                        <option value="AFOX">AFOX</option>
                        <option value="SOL">SOL</option>
                    </select>
                </div>

                <div class="quote-details">
                    <div class="detail-item">Price Impact: <span id="price-impact">0%</span></div>
                    <div class="detail-item">Fee: <span id="lp-fee">0</span></div>
                    <div class="detail-item">Min Received: <span id="min-received">0</span></div>
                </div>

                <div class="swap-buttons">
                    <button id="get-quote-btn" class="btn secondary-btn">Get Quote</button>
                    <button id="execute-swap-btn" class="btn primary-btn" style="display: none;">Execute Swap</button>
                </div>
            </div>
        </section>

        <section id="nft-section" class="glass-card">
            <h2>üñºÔ∏è NFT Marketplace</h2>
            <div class="nft-tabs">
                <button class="tab-link active" onclick="toggleNftTab('market')">Marketplace</button>
                <button class="tab-link" onclick="toggleNftTab('user')">My NFTs</button>
            </div>

            <div id="marketplace-nft-list" class="nft-grid">
                </div>

            <div id="user-nft-list" class="nft-grid" style="display: none;">
                <button class="btn mint-trigger" onclick="openMintModal()">+ Mint New NFT</button>
                </div>
        </section>

        <section id="dao-section" class="glass-card">
            <h2>üèõÔ∏è DAO Governance</h2>
            <button id="createProposalBtn" class="btn primary-btn">Create Proposal</button>
            <div id="announcements-list" class="announcements-container">
                </div>
        </section>

    </main>

    <div id="nft-details-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="nft-detail-view">
                <img id="nft-detail-image" src="" alt="NFT">
                <div class="nft-info">
                    <h3 id="nft-detail-name"></h3>
                    <p id="nft-detail-description"></p>
                    <div class="meta-tags">
                        <span>Owner: <b id="nft-detail-owner"></b></span>
                        <span>Mint: <b id="nft-detail-mint"></b></span>
                    </div>
                    <ul id="attributes-list" class="attr-list"></ul>
                    <div class="nft-actions">
                        <button id="nft-detail-buy-btn" class="btn primary-btn">Buy NFT</button>
                        <button id="nft-detail-sell-btn" class="btn secondary-btn">List/Unlist</button>
                        <button id="nft-detail-transfer-btn" class="btn danger-btn">Transfer</button>
                    </div>
                    <h4>History</h4>
                    <ul id="nft-detail-history" class="history-list"></ul>
                </div>
            </div>
        </div>
    </div>

    <div id="mint-nft-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>Mint AlphaFox NFT</h3>
            <form id="mint-nft-form">
                <input type="text" name="mint-name" placeholder="Name" required>
                <textarea name="mint-description" placeholder="Description"></textarea>
                <input type="url" name="mint-image" placeholder="Image URL">
                <button type="submit" class="btn primary-btn">Mint (0.05 SOL)</button>
            </form>
        </div>
    </div>

    <script src="script.js"></script>

    <script>
        // –ù–µ–±–æ–ª—å—à–∏–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤–∫–ª–∞–¥–æ–∫
        function toggleNftTab(type) {
            const market = document.getElementById('marketplace-nft-list');
            const user = document.getElementById('user-nft-list');
            const tabs = document.querySelectorAll('.tab-link');
            
            tabs.forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');

            if (type === 'market') {
                market.style.display = 'grid';
                user.style.display = 'none';
            } else {
                market.style.display = 'none';
                user.style.display = 'grid';
            }
        }

        function openMintModal() {
            document.getElementById('mint-nft-modal').style.display = 'flex';
        }
    </script>
</body>
</html>
