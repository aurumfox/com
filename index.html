<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AlphaFox DAO | Web3 Staking & NFT</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    
    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
    <script src="https://project-serum.github.io/anchor/dist/anchor.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@solana/wallet-adapter-phantom@latest/lib/index.iife.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/buffer/6.0.3/buffer.min.js"></script>
    <script>window.Buffer = window.Buffer || buffer.Buffer;</script>
</head>
<body>

    <div id="page-loader" class="loader-overlay" style="display: none;">
        <div class="spinner"></div>
    </div>

    <div id="notification-container"></div>

    <header class="header">
        <div class="logo">ALPHAFOX<span>DAO</span></div>
        <nav class="main-nav" id="mainNav">
            <a href="#staking">–°—Ç–µ–π–∫–∏–Ω–≥</a>
            <a href="#marketplace">NFT –ú–∞—Ä–∫–µ—Ç</a>
            <a href="#swap">–°–≤–æ–ø</a>
            <button id="closeMainMenuCross" class="mobile-only">‚úï</button>
        </nav>
        <div class="wallet-controls">
            <button class="connect-wallet-btn" id="headerConnectBtn">–ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª–µ–∫</button>
            <div class="wallet-display" style="display: none;" data-wallet-control="walletDisplay">
                <span class="wallet-address-display">0x...</span>
                <button class="copy-btn" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å">üìã</button>
            </div>
        </div>
        <button id="menuToggle" class="hamburger mobile-only">
            <span></span><span></span><span></span>
        </button>
    </header>

    <div class="nav-mobile-overlay"></div>

    <main class="container">
        <section id="staking" class="card-section">
            <h2><span class="icon">ü¶ä</span> AlphaFox Staking</h2>
            <div class="staking-grid">
                <div class="stat-card">
                    <p>–í–∞—à –±–∞–ª–∞–Ω—Å AFOX</p>
                    <h3 id="user-afox-balance">0 AFOX</h3>
                </div>
                <div class="stat-card">
                    <p>–í —Å—Ç–µ–π–∫–∏–Ω–≥–µ</p>
                    <h3 id="user-staked-amount">0 AFOX</h3>
                </div>
                <div class="stat-card primary">
                    <p>–ù–∞–≥—Ä–∞–¥—ã</p>
                    <h3 id="user-rewards-amount">0 AFOX</h3>
                    <button id="claim-rewards-btn" class="btn btn-glow" disabled>–ó–∞–±—Ä–∞—Ç—å –Ω–∞–≥—Ä–∞–¥—ã</button>
                </div>
            </div>

            <div class="staking-actions">
                <div class="input-group">
                    <label>–°—É–º–º–∞ —Å—Ç–µ–π–∫–∏–Ω–≥–∞</label>
                    <div class="input-wrapper">
                        <input type="number" id="stake-amount" placeholder="0.00">
                        <button class="max-amount-btn" data-input-id="stake-amount">MAX</button>
                    </div>
                    <select id="pool-selector" class="select-input"></select>
                    <button id="stake-afox-btn" class="btn btn-primary">–ó–∞—Å—Ç–µ–π–∫–∞—Ç—å</button>
                </div>
                <div class="info-group">
                    <p>–¢–µ–∫—É—â–∏–π –ø–ª–∞–Ω: <span id="staking-apr">‚Äî</span></p>
                    <p>–û—Å—Ç–∞—Ç–æ–∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏: <span id="lockup-period">‚Äî</span></p>
                    <button id="unstake-afox-btn" class="btn btn-outline" disabled>–í—ã–≤–µ—Å—Ç–∏ –∏–∑ —Å—Ç–µ–π–∫–∏–Ω–≥–∞</button>
                </div>
            </div>
        </section>

        <section id="swap" class="card-section">
            <h2><span class="icon">üîÑ</span> –ë—ã—Å—Ç—Ä—ã–π –æ–±–º–µ–Ω</h2>
            <div class="swap-container">
                <div class="swap-box">
                    <div class="token-input">
                        <input type="number" id="swap-from-amount" placeholder="0.0">
                        <select id="swap-from-token">
                            <option value="SOL">SOL</option>
                            <option value="AFOX">AFOX</option>
                        </select>
                    </div>
                    <p class="balance-text">–ë–∞–ª–∞–Ω—Å: <span id="swap-from-balance">0</span></p>
                    
                    <button id="swap-direction-btn" class="direction-btn">‚Üì‚Üë</button>

                    <div class="token-input">
                        <input type="number" id="swap-to-amount" placeholder="0.0" readonly>
                        <select id="swap-to-token">
                            <option value="AFOX">AFOX</option>
                            <option value="SOL">SOL</option>
                        </select>
                    </div>
                    
                    <div class="swap-details">
                        <p>–í–ª–∏—è–Ω–∏–µ –Ω–∞ —Ü–µ–Ω—É: <span id="price-impact">0%</span></p>
                        <p>–ö–æ–º–∏—Å—Å–∏—è: <span id="lp-fee">0</span></p>
                    </div>
                    <button id="get-quote-btn" class="btn btn-primary">–ü–æ–ª—É—á–∏—Ç—å –∫–æ—Ç–∏—Ä–æ–≤–∫—É</button>
                    <button id="execute-swap-btn" class="btn btn-glow" style="display:none;">–û–±–º–µ–Ω—è—Ç—å</button>
                </div>
            </div>
        </section>

        <section id="marketplace" class="card-section">
            <h2><span class="icon">üñºÔ∏è</span> NFT –ö–æ–ª–ª–µ–∫—Ü–∏—è</h2>
            <div class="tabs">
                <button class="tab-btn active" onclick="showTab('market')">–ú–∞—Ä–∫–µ—Ç</button>
                <button class="tab-btn" onclick="showTab('my-nfts')">–ú–æ–∏ NFT</button>
            </div>
            
            <div id="market-view" class="nft-grid">
                <div id="marketplace-nft-list"></div>
            </div>
            
            <div id="my-nfts-view" class="nft-grid" style="display:none;">
                <button class="btn btn-secondary" onclick="document.getElementById('mint-nft-modal').style.display='flex'">–°–æ–∑–¥–∞—Ç—å NFT</button>
                <div id="user-nft-list"></div>
            </div>
        </section>
    </main>

    <div id="nft-details-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">√ó</span>
            <div class="modal-body">
                <img id="nft-detail-image" src="" alt="NFT">
                <div class="details">
                    <h2 id="nft-detail-name"></h2>
                    <p id="nft-detail-description"></p>
                    <ul id="attributes-list"></ul>
                    <div class="nft-meta">
                        <p>–í–ª–∞–¥–µ–ª–µ—Ü: <span id="nft-detail-owner"></span></p>
                        <p>Mint: <span id="nft-detail-mint"></span></p>
                    </div>
                    <div class="modal-actions">
                        <button id="nft-detail-buy-btn" class="btn btn-glow">–ö—É–ø–∏—Ç—å</button>
                        <button id="nft-detail-sell-btn" class="btn btn-primary">–í—ã—Å—Ç–∞–≤–∏—Ç—å</button>
                        <button id="nft-detail-transfer-btn" class="btn btn-outline">–ü–µ—Ä–µ–¥–∞—Ç—å</button>
                    </div>
                    <hr>
                    <h4>–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</h4>
                    <ul id="nft-detail-history"></ul>
                </div>
            </div>
        </div>
    </div>

    <div id="mint-nft-modal" class="modal">
        <div class="modal-content small">
            <span class="close-modal">√ó</span>
            <h3>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π AlphaFox NFT</h3>
            <form id="mint-nft-form">
                <input type="text" name="mint-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ NFT" required>
                <textarea name="mint-description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ"></textarea>
                <input type="url" name="mint-image" placeholder="URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è">
                <button type="submit" class="btn btn-glow">–ú–∏–Ω—Ç–∏—Ç—å (0.05 SOL)</button>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫
        function showTab(tab) {
            document.getElementById('market-view').style.display = tab === 'market' ? 'grid' : 'none';
            document.getElementById('my-nfts-view').style.display = tab === 'my-nfts' ? 'grid' : 'none';
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
        }
    </script>
</body>
</html>
